{"version":3,"file":"545.js","mappings":"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","sources":["webpack://@dev/web/../stl/src/containers/styles.module.scss?d509","webpack://@dev/web/../stl/src/containers/index.tsx","webpack://@dev/web/../stl/src/containers/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.91.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.91.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.91.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.91.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.91.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.91.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/.pnpm/css-loader@7.1.1_webpack@5.91.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../node_modules/.pnpm/sass-loader@14.2.0_sass@1.75.0_webpack@5.91.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/.pnpm/css-loader@7.1.1_webpack@5.91.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../node_modules/.pnpm/sass-loader@14.2.0_sass@1.75.0_webpack@5.91.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { memo, useCallback, useMemo, useRef, useState } from \"react\";\nimport {\n  AccumulativeShadows,\n  Center,\n  Edges,\n  Environment,\n  Extrude,\n  GizmoHelper,\n  GizmoViewport,\n  Grid,\n  OrbitControls,\n  RandomizedLight,\n} from \"@react-three/drei\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { type Mesh, Path, Shape } from \"three\";\nimport { STLExporter } from \"three/examples/jsm/exporters/STLExporter\";\nimport styles from \"./styles.module.scss\";\n\n// https://threejs.org/examples/#misc_exporter_stl\nfunction save(blob: Blob, filename: string) {\n  const link = document.createElement(\"a\");\n  link.style.display = \"none\";\n  document.body.appendChild(link);\n  link.href = URL.createObjectURL(blob);\n  link.download = filename;\n  link.click();\n  document.body.removeChild(link);\n}\n\nfunction saveArrayBuffer(buffer: BlobPart, filename: string) {\n  save(new Blob([buffer], { type: \"application/octet-stream\" }), filename);\n}\n\n// https://codesandbox.io/p/sandbox/grid-component-19uq2u\nconst Shadows = memo(() => (\n  <AccumulativeShadows\n    temporal\n    frames={100}\n    color=\"#9d4b4b\"\n    colorBlend={0.5}\n    alphaTest={0.9}\n    scale={20}\n  >\n    <RandomizedLight amount={8} radius={4} position={[5, 5, -10]} />\n  </AccumulativeShadows>\n));\n\nexport default function Section() {\n  const [gridConfig] = useState({\n    // gridSize: [10.5, 10.5],\n    cellSize: { value: 0.6, min: 0, max: 10, step: 0.1 }.value,\n    cellThickness: { value: 1, min: 0, max: 5, step: 0.1 }.value,\n    cellColor: \"#6f6f6f\",\n    sectionSize: { value: 3.3, min: 0, max: 10, step: 0.1 }.value,\n    sectionThickness: { value: 1.5, min: 0, max: 5, step: 0.1 }.value,\n    sectionColor: \"#9d4b4b\",\n    fadeDistance: { value: 25, min: 0, max: 100, step: 1 }.value,\n    fadeStrength: { value: 1, min: 0, max: 1, step: 0.1 }.value,\n    followCamera: false,\n    infiniteGrid: true,\n  });\n\n  const meshRef = useRef<Mesh>();\n  const svgRef = useRef<SVGSVGElement>();\n\n  const handleExport = useCallback(() => {\n    const exporter = new STLExporter();\n    const result = exporter.parse(meshRef.current, { binary: true });\n    saveArrayBuffer(result, \"shape.stl\");\n  }, []);\n\n  const shape = useMemo(() => {\n    // https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_shapes.html\n    const shape = new Shape()\n      .moveTo(0, 0)\n      .lineTo(1.1, 0)\n      .lineTo(2, 1)\n      .lineTo(1.1, 2)\n      .lineTo(0, 2)\n      .lineTo(0, 0);\n\n    const holePath = new Path()\n      .moveTo(1, 1)\n      .absarc(0.8, 1, 0.4, 0, Math.PI * 2, true);\n\n    shape.holes.push(holePath);\n    return shape;\n  }, []);\n\n  const extrudeSettings = { steps: 2, depth: 1, bevelEnabled: false };\n\n  return (\n    <section className={styles.Section}>\n      <h2>Stl</h2>\n      <div>\n        <button onClick={handleExport}>export</button>\n      </div>\n      <div style={{ height: 400 }}>\n        <Canvas shadows camera={{ position: [10, 12, 12], fov: 10 }}>\n          {/* <group position={[0, -0.5, 0]}> */}\n          <group rotation={[0, Math.PI / 2, 0]}>\n            {/* <Center top> */}\n            <Extrude\n              ref={meshRef}\n              args={[shape, extrudeSettings]}\n              // rotation={[Math.PI / 2, 0, -Math.PI / 2]}\n              castShadow\n            >\n              <meshStandardMaterial color=\"#9d4b4b\" />\n              {/* <Edges /> */}\n            </Extrude>\n          </group>\n          {/* </Center> */}\n          <Shadows />\n          <Grid position={[0, -0.01, 0]} args={[10.5, 10.5]} {...gridConfig} />\n          {/* </group> */}\n          <OrbitControls makeDefault />\n          <Environment preset=\"city\" />\n          <GizmoHelper alignment=\"bottom-right\" margin={[80, 80]}>\n            <GizmoViewport\n              axisColors={[\"#9d4b4b\", \"#2f7f4f\", \"#3b5b9d\"]}\n              labelColor=\"white\"\n            />\n          </GizmoHelper>\n        </Canvas>\n      </div>\n    </section>\n  );\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/.pnpm/css-loader@7.1.1_webpack@5.91.0/node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/.pnpm/css-loader@7.1.1_webpack@5.91.0/node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.KEyQ6xTtdx1PShrAb3nc{display:flex;flex-direction:column}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../stl/src/containers/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CACA,qBAAA\",\"sourcesContent\":[\".Section {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": `KEyQ6xTtdx1PShrAb3nc`\n};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","Shadows","memo","React","AccumulativeShadows","temporal","frames","color","colorBlend","alphaTest","scale","RandomizedLight","amount","radius","position","Section","gridConfig","useState","cellSize","cellThickness","cellColor","sectionSize","sectionThickness","sectionColor","fadeDistance","fadeStrength","followCamera","infiniteGrid","meshRef","useRef","handleExport","useCallback","buffer","filename","STLExporter","parse","current","binary","blob","link","document","createElement","style","display","body","appendChild","href","URL","createObjectURL","download","click","removeChild","save","Blob","type","shape","useMemo","Shape","moveTo","lineTo","holePath","Path","absarc","Math","PI","holes","push","className","styles","onClick","height","Canvas","shadows","camera","fov","rotation","Extrude","ref","args","steps","depth","bevelEnabled","castShadow","Grid","_extends","OrbitControls","makeDefault","Environment","preset","GizmoHelper","alignment","margin","GizmoViewport","axisColors","labelColor","___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","module","id","locals","exports"],"sourceRoot":""}