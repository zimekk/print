{"version":3,"file":"616.js","mappings":"6RAWIA,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IACxBF,EAAQG,OAAS,SAAc,KAAM,QACrCH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKnB,QAAe,KAAW,WAAiB,gBAAiBM,ECd7DC,EAAUC,GACd,IAAIC,SAASC,GACXC,OAAOC,OAAO,IAAIC,WAAc,CAC9BC,OAAQA,EAAGC,YAAaL,EAAQK,EAAOC,UACtCC,cAAcT,KAGrB,SAASU,GAAO,SAAEC,IAEhB,MAAMC,GAAeC,EAAAA,EAAAA,cACnBC,OAASP,aACP,MAAMQ,EAAOR,EAAOS,MAAMC,KAAK,GAC/BN,QAAeZ,EAAOgB,IACtBR,EAAOW,MAAQ,EAAE,GAEnB,IAEF,OACEC,EAAAA,cAAA,WACEA,EAAAA,cAAA,SAAOC,KAAK,OAAOC,SAAUT,IAGnC,CAEA,SAASU,GAAK,KAAEP,IACd,OAAOI,EAAAA,cAAA,WAAMJ,EAAKQ,MAAM,KAAK,GAC/B,CAEA,SAASC,GAAK,MAAER,IACd,MAAMS,GAAMC,EAAAA,EAAAA,QAA0B,MAEhCC,GAAcd,EAAAA,EAAAA,cAAYC,UA+B9B,MAAMc,QAAkBC,EAAAA,YAAYC,SAEpC,IAAK,IAAIC,EAAI,EAAGA,EAAIf,EAAMgB,OAAQD,IAAK,CACrC,MAAME,QAAYJ,EAAAA,YAAYK,KAAKlB,EAAMe,WAEdH,EAAUO,UAAUF,EAAKA,EAAIG,mBAC3CC,SAASC,GAASV,EAAUW,QAAQD,IACnD,CAGA,MAAME,QAAmBZ,EAAUa,aAAa,CAAEC,SAAS,IAC3DjB,EAAIkB,QAAQC,IAAMJ,CAAU,GAC3B,CAACxB,EAAOS,IAEX,OACEN,EAAAA,cAAA,WACEA,EAAAA,cAAA,UAAQ0B,QAASlB,GAAa,QAC9BR,EAAAA,cAAA,UACEM,IAAKA,EACLqB,MAAO,CACLC,MAAO,OACPC,OAAQ,UAKlB,CAEe,SAASC,IACtB,MAAOjC,EAAOkC,IAAYC,EAAAA,EAAAA,UAAmB,KAC7CC,EAAAA,EAAAA,YAAU,QAAU,IAEpB,MAAMC,GAAexC,EAAAA,EAAAA,cAClBE,IACCmC,GAAUlC,GAAUA,EAAMsC,OAAOvC,IAAM,GAEzC,CAACmC,IAGH,OACE/B,EAAAA,cAAA,WAASoC,UAAWC,EAAAA,SAClBrC,EAAAA,cAAA,UAAI,QACHH,EAAMyC,KAAI,CAACxC,EAAMyC,IAChBvC,EAAAA,cAACG,EAAI,CAACoC,IAAKA,EAAK3C,KAAME,MAExBE,EAAAA,cAACT,EAAM,CAACC,SAAU0C,IAClBlC,EAAAA,cAACK,EAAI,CAACR,MAAOA,IAGnB,C,iBCxHA,IAAI2C,EAAwC,EAAQ,MAEhDC,EAD8B,EAAQ,KACZC,CAA4BF,GAE1DC,EAAwBE,KAAK,CAACC,EAAOC,GAAI,4DAA6D,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,8DAA8D,MAAQ,GAAG,SAAW,6BAA6B,eAAiB,CAAC,gEAAgE,WAAa,MAEjVJ,EAAwBK,OAAS,CAChC,QAAW,wBAEZF,EAAOG,QAAUN,C","sources":["webpack://@dev/web/../join/src/containers/Join/styles.module.scss?6264","webpack://@dev/web/../join/src/containers/Join/index.tsx","webpack://@dev/web/../join/src/containers/Join/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.92.1/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.92.1/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.92.1/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.92.1/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.92.1/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.92.1/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.92.1/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../../node_modules/.pnpm/sass-loader@14.2.1_sass@1.77.8_webpack@5.92.1/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.92.1/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../../node_modules/.pnpm/sass-loader@14.2.1_sass@1.77.8_webpack@5.92.1/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  type ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { PDFDocument } from \"pdf-lib\";\nimport styles from \"./styles.module.scss\";\n\nconst getUri = (blob: Blob) =>\n  new Promise((resolve) =>\n    Object.assign(new FileReader(), {\n      onload: ({ target }) => resolve(target.result),\n    }).readAsDataURL(blob)\n  );\n\nfunction Upload({ onUpload }) {\n  // https://stackoverflow.com/questions/61985832/how-to-load-image-and-convert-to-blob-in-react\n  const handleChange = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    async ({ target }) => {\n      const file = target.files.item(0);\n      onUpload(await getUri(file));\n      target.value = \"\";\n    },\n    []\n  );\n  return (\n    <div>\n      <input type=\"file\" onChange={handleChange} />\n    </div>\n  );\n}\n\nfunction File({ file }: { file: string }) {\n  return <div>{file.split(\";\")[0]}</div>;\n}\n\nfunction Join({ files }) {\n  const ref = useRef<HTMLIFrameElement>(null);\n\n  const handleClick = useCallback(async () => {\n    // const existingPdfBytes = files[0];\n\n    // // Load a PDFDocument from the existing PDF bytes\n    // const pdfDoc = await PDFDocument.load(existingPdfBytes)\n\n    // // Embed the Helvetica font\n    // const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica)\n\n    // // Get the first page of the document\n    // const pages = pdfDoc.getPages()\n\n    // const firstPage = pages[0]\n\n    // // Get the width and height of the first page\n    // const { width, height } = firstPage.getSize()\n\n    // // Draw a string of text diagonally across the first page\n    // firstPage.drawText('This text was added with JavaScript!', {\n    //   x: 5,\n    //   y: height / 2 + 300,\n    //   size: 50,\n    //   font: helveticaFont,\n    //   color: rgb(0.95, 0.1, 0.1),\n    //   rotate: degrees(-45),\n    // })\n\n    // Serialize the PDFDocument to bytes (a Uint8Array)\n    // const pdfBytes = await pdfDoc.save()\n\n    // https://github.com/Hopding/pdf-lib/issues/252\n    const mergedPdf = await PDFDocument.create();\n\n    for (let i = 0; i < files.length; i++) {\n      const pdf = await PDFDocument.load(files[i]);\n\n      const copiedPagesA = await mergedPdf.copyPages(pdf, pdf.getPageIndices());\n      copiedPagesA.forEach((page) => mergedPdf.addPage(page));\n    }\n\n    // https://pspdfkit.com/blog/2021/how-to-build-a-javascript-pdf-editor/\n    const pdfDataUri = await mergedPdf.saveAsBase64({ dataUri: true });\n    ref.current.src = pdfDataUri;\n  }, [files, ref]);\n\n  return (\n    <div>\n      <button onClick={handleClick}>join</button>\n      <iframe\n        ref={ref}\n        style={{\n          width: \"100%\",\n          height: \"50vh\",\n        }}\n      />\n    </div>\n  );\n}\n\nexport default function Section() {\n  const [files, setFiles] = useState<string[]>([]);\n  useEffect(() => {}, []);\n\n  const handleUpload = useCallback(\n    (file: string) => {\n      setFiles((files) => files.concat(file));\n    },\n    [setFiles]\n  );\n\n  return (\n    <section className={styles.Section}>\n      <h2>Join</h2>\n      {files.map((item, key) => (\n        <File key={key} file={item} />\n      ))}\n      <Upload onUpload={handleUpload} />\n      <Join files={files} />\n    </section>\n  );\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.92.1/node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.92.1/node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.X7TSZlLrfGJo1SK0rlOU{display:flex;flex-direction:column}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../join/src/containers/Join/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CACA,qBAAA\",\"sourcesContent\":[\".Section {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": `X7TSZlLrfGJo1SK0rlOU`\n};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","getUri","blob","Promise","resolve","Object","assign","FileReader","onload","target","result","readAsDataURL","Upload","onUpload","handleChange","useCallback","async","file","files","item","value","React","type","onChange","File","split","Join","ref","useRef","handleClick","mergedPdf","PDFDocument","create","i","length","pdf","load","copyPages","getPageIndices","forEach","page","addPage","pdfDataUri","saveAsBase64","dataUri","current","src","onClick","style","width","height","Section","setFiles","useState","useEffect","handleUpload","concat","className","styles","map","key","___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","push","module","id","locals","exports"],"sourceRoot":""}