{"version":3,"file":"187.js","mappings":"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","sources":["webpack://@dev/web/../stl/src/containers/styles.module.scss?fc06","webpack://@dev/web/../stl/src/containers/index.tsx","webpack://@dev/web/../stl/src/containers/styles.module.scss"],"sourcesContent":["\n      import API from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.95.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.95.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.95.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.95.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.95.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.95.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.95.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../node_modules/.pnpm/sass-loader@16.0.2_sass@1.79.5_webpack@5.95.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.95.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../node_modules/.pnpm/sass-loader@16.0.2_sass@1.79.5_webpack@5.95.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { memo, useCallback, useMemo, useRef, useState } from \"react\";\nimport {\n  AccumulativeShadows,\n  // Center,\n  // Edges,\n  Environment,\n  Extrude,\n  GizmoHelper,\n  GizmoViewport,\n  Grid,\n  OrbitControls,\n  RandomizedLight,\n  Lathe,\n} from \"@react-three/drei\";\nimport { Canvas } from \"@react-three/fiber\";\nimport {\n  // DoubleSide,\n  MathUtils,\n  type Mesh,\n  Shape,\n  CatmullRomCurve3,\n  Vector2,\n  Vector3,\n} from \"three\";\nimport { STLExporter } from \"three/examples/jsm/exporters/STLExporter\";\nimport styles from \"./styles.module.scss\";\n\n// https://threejs.org/examples/#misc_exporter_stl\nfunction save(blob: Blob, filename: string) {\n  const link = document.createElement(\"a\");\n  link.style.display = \"none\";\n  document.body.appendChild(link);\n  link.href = URL.createObjectURL(blob);\n  link.download = filename;\n  link.click();\n  document.body.removeChild(link);\n}\n\nfunction saveArrayBuffer(buffer: BlobPart, filename: string) {\n  save(new Blob([buffer], { type: \"application/octet-stream\" }), filename);\n}\n\n// https://codesandbox.io/p/sandbox/grid-component-19uq2u\nconst Shadows = memo(() => (\n  <AccumulativeShadows\n    temporal\n    frames={100}\n    color=\"#9d4b4b\"\n    colorBlend={0.5}\n    alphaTest={0.9}\n    scale={20}\n  >\n    <RandomizedLight amount={8} radius={4} position={[5, 5, -10]} />\n  </AccumulativeShadows>\n));\n\nconst positions = new Float32Array([10, 0, 0, 2, 5, 0, -1, 2, 0, 1, -1, 0]);\n\nconst normals = new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]);\n\nconst colors = new Float32Array([\n  0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1,\n]);\n\nconst indices = new Uint16Array([0, 1, 3, 2, 3, 1]);\n\nconst Comp = () => (\n  <mesh>\n    <bufferGeometry>\n      <bufferAttribute\n        attach=\"attributes-position\"\n        array={positions}\n        count={positions.length / 3}\n        itemSize={3}\n      />\n      <bufferAttribute\n        attach=\"attributes-color\"\n        array={colors}\n        count={colors.length / 3}\n        itemSize={3}\n      />\n      <bufferAttribute\n        attach=\"attributes-normal\"\n        array={normals}\n        count={normals.length / 3}\n        itemSize={3}\n      />\n      <bufferAttribute\n        attach=\"index\"\n        array={indices}\n        count={indices.length}\n        itemSize={1}\n      />\n    </bufferGeometry>\n    <meshBasicMaterial color=\"#2f7f4f\" wireframe />\n    {/* <meshStandardMaterial\n          vertexColors\n          side={DoubleSide}\n      /> */}\n  </mesh>\n);\n\n// https://discourse.threejs.org/t/how-to-use-extrudegeometry-with-functional-components/30446\nfunction Extrusion({ start = [0, 0], paths, ...props }) {\n  const shape = useMemo(() => {\n    const shape = new Shape();\n    shape.moveTo(...(start as [number, number]));\n    // paths.forEach((path) => shape.bezierCurveTo(...path))\n    paths.forEach((path: [number, number]) => shape.lineTo(...path));\n    return shape;\n  }, [start, paths]);\n\n  return (\n    <mesh>\n      <extrudeGeometry args={[shape, props]} />\n      <meshBasicMaterial color=\"#2f7f4f\" wireframe />\n    </mesh>\n  );\n}\n\n// https://stackoverflow.com/questions/51874333/three-js-generate-shape-with-arcs\nfunction Screw() {\n  const shape = useMemo(() => {\n    const shape = new Shape();\n    shape.absarc(0, -4, 5, MathUtils.degToRad(60), MathUtils.degToRad(120));\n    shape.absarc(0, 4, 5, MathUtils.degToRad(240), MathUtils.degToRad(300));\n    return shape;\n  }, []);\n\n  return (\n    <mesh>\n      <extrudeGeometry\n        args={[\n          shape,\n          {\n            // bevelSegments:5,\n            depth: 10,\n            // extrudePath={closedSpline}\n            steps: 10,\n          },\n        ]}\n      />\n      <meshBasicMaterial color=\"#2f7f4f\" wireframe />\n    </mesh>\n  );\n}\n\nexport const Shapes = function ({ wireframe, meshRef }) {\n  // const meshRef = useRef<Mesh>();\n  // const svgRef = useRef<SVGSVGElement>();\n\n  const shape = useMemo(() => {\n    // https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_shapes.html\n    const shape = new Shape().moveTo(-20, 0).lineTo(0, 30).lineTo(40, 0);\n    return shape;\n  }, []);\n\n  const extrudeSettings = { steps: 2, depth: 10, bevelEnabled: false };\n\n  // https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_extrude_shapes.html\n  const closedSpline = new CatmullRomCurve3([\n    new Vector3(-60, -100, 60),\n    new Vector3(-60, 20, 60),\n    new Vector3(-60, 120, 60),\n    new Vector3(60, 20, -60),\n    new Vector3(60, -100, -60),\n  ]);\n\n  closedSpline.curveType = \"catmullrom\";\n  // closedSpline.closed = true;\n\n  return (\n    <>\n      <Extrusion\n        bevelSegments={5}\n        depth={10}\n        extrudePath={closedSpline}\n        paths={[\n          // [-20, 25, 0, 0, 10,10],\n          [2, 2.5, 2.0, 0, 0, -1],\n          [4.0, 0, 3.0, 3.5, 5.0, 3.5],\n          [3.0, 5.5, 1.0, 1.7, 1.5, 6.5],\n        ]}\n        steps={10}\n      />\n      <Screw />\n      <Comp />\n      <Extrude ref={meshRef} args={[shape, extrudeSettings]} castShadow>\n        {wireframe ? (\n          <meshBasicMaterial color=\"#2f7f4f\" wireframe />\n        ) : (\n          <meshStandardMaterial color=\"#9d4b4b\" />\n        )}\n      </Extrude>\n    </>\n  );\n};\n\n// https://codesandbox.io/p/sandbox/three-js-lathe-capsulegeometry-9iey6z?file=%2Fsrc%2FCapsuleGeometry.js%3A11%2C39\nexport const Lathes = function ({ wireframe, meshRef }) {\n  const segments = 5;\n  const points = useMemo(() => {\n    // https://threejs.org/docs/#api/en/geometries/LatheGeometry\n    const points = [];\n    for (let i = 0; i < 10; i++) {\n      points.push(new Vector2(Math.sin(i * 0.2) * 10 + 5, (i - 5) * 2));\n    }\n    return points;\n  }, []);\n\n  return (\n    <Lathe ref={meshRef} args={[points, segments]}>\n      {wireframe ? (\n        <meshBasicMaterial color=\"#2f7f4f\" wireframe />\n      ) : (\n        <meshStandardMaterial color=\"#9d4b4b\" />\n      )}\n    </Lathe>\n  );\n};\n\nexport const Caps = function ({ wireframe, meshRef }) {\n  const segments = 36 * 2;\n  const points = useMemo(() => {\n    const r1 = 15 / 2;\n    const r2 = 13.5 / 2;\n    let n = 0;\n    return [\n      new Vector2(0, n),\n      new Vector2(r1 - 0.2, n),\n      new Vector2(r1, ++n - 0.8),\n      new Vector2(r1, ++n),\n      new Vector2(r2 - 0.1, n),\n      new Vector2(r2, ++n),\n      new Vector2(r2 - 1, ++n),\n      new Vector2(r2, ++n),\n      new Vector2(r2 - 1, ++n),\n      new Vector2(r2, ++n),\n      new Vector2(r2 - 1, ++n),\n      new Vector2(r2, ++n),\n      new Vector2(r2 - 1, ++n),\n      new Vector2(0, n),\n    ];\n  }, []);\n\n  return (\n    <Lathe ref={meshRef} args={[points, segments]}>\n      {wireframe ? (\n        <meshBasicMaterial color=\"#2f7f4f\" wireframe />\n      ) : (\n        <meshStandardMaterial color=\"#9d4b4b\" />\n      )}\n    </Lathe>\n  );\n};\n\nconst PAGES = {\n  caps: Caps,\n  lathe: Lathes,\n  shape: Shapes,\n};\n\nexport default function Section() {\n  const [page, setPage] = useState(() => Object.keys(PAGES)[0]);\n  const [preview, setPreview] = useState(null);\n  const [wireframe, setWireframe] = useState(true);\n  const [showCanvas] = useState(true);\n  const [gridConfig] = useState({\n    // gridSize: [10.5, 10.5],\n    cellSize: { value: 10, min: 0, max: 10, step: 0.1 }.value,\n    cellThickness: { value: 1, min: 0, max: 5, step: 0.1 }.value,\n    cellColor: \"#6f6f6f\",\n    sectionSize: { value: 100, min: 0, max: 10, step: 0.1 }.value,\n    sectionThickness: { value: 1.5, min: 0, max: 5, step: 0.1 }.value,\n    sectionColor: \"#9d4b4b\",\n    fadeDistance: { value: 250, min: 0, max: 100, step: 1 }.value,\n    fadeStrength: { value: 1, min: 0, max: 1, step: 0.1 }.value,\n    followCamera: false,\n    infiniteGrid: true,\n  });\n\n  const Page = PAGES[page];\n\n  const meshRef = useRef<Mesh>();\n  // const svgRef = useRef<SVGSVGElement>();\n\n  const handleExport = useCallback(() => {\n    const exporter = new STLExporter();\n    const result = exporter.parse(meshRef.current, { binary: true });\n    saveArrayBuffer(result, \"shape.stl\");\n  }, []);\n\n  const handleToggle = useCallback(\n    ({ target }) => setWireframe(target.checked),\n    [],\n  );\n\n  const handleFileChange = useCallback(({ target }) => {\n    // https://stackoverflow.com/questions/38049966/get-image-preview-before-uploading-in-react\n    const objectUrl = URL.createObjectURL(target.files[0]);\n    setPreview(objectUrl);\n\n    // free memory when ever this component is unmounted\n    return () => URL.revokeObjectURL(objectUrl);\n  }, []);\n\n  // https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_extrude_shapes.html\n  const closedSpline = new CatmullRomCurve3([\n    new Vector3(-60, -100, 60),\n    new Vector3(-60, 20, 60),\n    new Vector3(-60, 120, 60),\n    new Vector3(60, 20, -60),\n    new Vector3(60, -100, -60),\n  ]);\n\n  closedSpline.curveType = \"catmullrom\";\n  // closedSpline.closed = true;\n\n  return (\n    <section className={styles.Section}>\n      <h2>Stl</h2>\n      <nav>\n        {Object.keys(PAGES).map((page, index) => (\n          <span key={index}>\n            {index > 0 && ` | `}\n            <a\n              key={page}\n              href={`#${page}`}\n              onClick={(e) => (e.preventDefault(), setPage(page))}\n            >\n              {page}\n            </a>\n          </span>\n        ))}\n      </nav>\n      <div>\n        <button onClick={handleExport}>export</button>\n        <input type=\"file\" onChange={handleFileChange} />\n        {preview && <button onClick={() => setPreview(null)}>x</button>}\n        <label>\n          <input type=\"checkbox\" onChange={handleToggle} checked={wireframe} />\n          <span>wireframe</span>\n        </label>\n      </div>\n      <div style={{ height: 400, position: \"relative\" }}>\n        {preview && (\n          <div style={{ position: \"absolute\", width: \"100%\", height: \"100%\" }}>\n            <img\n              style={{ width: \"100%\", height: \"100%\", objectFit: \"contain\" }}\n              src={preview}\n            />\n          </div>\n        )}\n        {showCanvas && (\n          <Canvas\n            shadows\n            camera={{\n              position: [100, 100, 100],\n              fov: 20,\n            }}\n          >\n            <Page wireframe={wireframe} meshRef={meshRef} />\n            <Grid\n              position={[0, -0.01, 0]}\n              args={[10.5, 10.5]}\n              {...gridConfig}\n            />\n            <OrbitControls makeDefault />\n            {!wireframe && <Environment preset=\"city\" />}\n            <GizmoHelper alignment=\"bottom-right\" margin={[80, 80]}>\n              <GizmoViewport\n                axisColors={[\"#9d4b4b\", \"#2f7f4f\", \"#3b5b9d\"]}\n                labelColor=\"white\"\n              />\n            </GizmoHelper>\n          </Canvas>\n        )}\n      </div>\n    </section>\n  );\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.95.0/node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.95.0/node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.KEyQ6xTtdx1PShrAb3nc{display:flex;flex-direction:column}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../stl/src/containers/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CACA,qBAAA\",\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": `KEyQ6xTtdx1PShrAb3nc`\n};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","positions","Float32Array","normals","colors","indices","Uint16Array","Comp","React","attach","array","count","length","itemSize","color","wireframe","Extrusion","start","paths","props","shape","useMemo","Shape","moveTo","forEach","path","lineTo","args","Screw","absarc","MathUtils","degToRad","depth","steps","PAGES","caps","meshRef","points","r2","n","Vector2","r1","Lathe","ref","lathe","i","push","Math","sin","closedSpline","CatmullRomCurve3","Vector3","curveType","bevelSegments","extrudePath","Extrude","bevelEnabled","castShadow","Section","page","setPage","useState","Object","keys","preview","setPreview","setWireframe","showCanvas","gridConfig","cellSize","cellThickness","cellColor","sectionSize","sectionThickness","sectionColor","fadeDistance","fadeStrength","followCamera","infiniteGrid","Page","useRef","handleExport","useCallback","buffer","filename","STLExporter","parse","current","binary","blob","link","document","createElement","style","display","body","appendChild","href","URL","createObjectURL","download","click","removeChild","save","Blob","type","handleToggle","target","checked","handleFileChange","objectUrl","files","revokeObjectURL","className","styles","map","index","key","onClick","e","preventDefault","onChange","height","position","width","objectFit","src","Canvas","shadows","camera","fov","Grid","_extends","OrbitControls","makeDefault","Environment","preset","GizmoHelper","alignment","margin","GizmoViewport","axisColors","labelColor","___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","module","id","locals","exports"],"sourceRoot":""}